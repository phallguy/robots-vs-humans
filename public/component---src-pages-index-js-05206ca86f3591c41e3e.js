(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{174:function(e,t,n){"use strict";n.r(t);n(61),n(120),n(60),n(13),n(47),n(35),n(29);var a=n(0),r=n.n(a),i=n(179);n(24),n(46),n(25),n(190);var o=function(e){var t=e.pawn,n=e.x,a=e.direction,i=e.attack,o=e.size,l=e.onClick,u=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,["pawn","x","direction","attack","size","onClick"]),s=t.x,c=s===n?"down":s<n?"right":"left";return r.a.createElement("span",Object.assign({},u,{className:"move move-size-"+o+" heading-"+c+" direction-"+(a>0?"down":"up")+" attack-"+!!i,onClick:l}))},l=function(e){var t=e.pawn,n=e.allowed,a=e.size,i=e.onAllowed;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"pawn pawn-size-"+a+" pawn-"+t.type}),n&&"default"===a&&function(e,t,n){return t.map(function(t){return t.pawn!==e?null:r.a.createElement(o,Object.assign({key:t.id,title:t.id},t,{onClick:n&&function(){return n(t)}}))})}(t,n,i))};l.defaultProps={size:"default"};var u=l;n(191);var s=function(e){var t=e.board,n=e.size,a=e.onAllowed,i=t.allowedMoves();return r.a.createElement("table",{className:"board board-size-"+n},r.a.createElement("tbody",null,t.mapY(function(e){return r.a.createElement("tr",{key:e},t.mapX(function(o){return r.a.createElement("td",{key:o},function(e){var t=e.board,n=e.allowed,a=e.x,i=e.y,o=e.size,l=e.onAllowed,s=t.pawnAt({x:a,y:i});return s?r.a.createElement(u,{key:s.id,pawn:s,allowed:n,size:o,onAllowed:l}):null}({board:t,allowed:i,x:o,y:e,size:n,onAllowed:a}))}))})))};s.defaultProps={size:"default"};var c=s,h=(n(86),1);function d(){return h++}var p=function(){function e(e){var t=e.x,n=e.y,a=e.status,r=e.type;this.x=t,this.y=n,this.status=a||"alive",this.type=r,this.id=d()}var t=e.prototype;return t.moveTo=function(t){var n=t.x,a=t.y;return new e({type:this.type,status:this.status,x:n,y:a})},t.die=function(){return new e({type:this.type,status:"dead",x:null,y:null})},e}();function f(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1))+e}var m=function(){function e(e){var t=e.size,n=e.pawns,a=e.turn,r=e.parent,i=e.move,o=e.weight;this.size=t,this.weight=o||3,this.turn=a||"white",this.pawns=n||function(e){var t=[];return Array.from(Array(e)).forEach(function(n,a){t.push(new p({x:a,y:e-1,type:"white"})),t.push(new p({x:a,y:0,type:"black"}))}),t}(t),this.move=i,this.moves={},this.parent=r,this.id=d()}var t=e.prototype;return t.pawnAt=function(e){var t=e.x,n=e.y;return this.pawns.find(function(e){return e.x===t&&e.y===n})},t.mapY=function(e){return Array.from(Array(this.size)).map(function(t,n){return e(n)})},t.mapX=function(e){return Array.from(Array(this.size)).map(function(t,n){return e(n)})},t.allowedMoves=function(){return this.isGameOver()?[]:this.candidateMoves()},t.candidateMoves=function(){var e=this,t="black"===this.turn?1:-1,n=[];this.pawns.forEach(function(a){var r=a.type,i=a.x,o=a.y,l=a.status,u=o+t;"alive"===l&&r===e.turn&&(e.canAttack({pawn:a,x:i-1,y:u})&&n.push({pawn:a,x:i-1,y:u,direction:t,attack:!0,id:d()}),e.canAttack({pawn:a,x:i+1,y:u})&&n.push({pawn:a,x:i+1,y:u,direction:t,attack:!0,id:d()}),u>=0&&u<e.size&&!e.pawnAt({x:i,y:u})&&n.push({pawn:a,x:i,y:u,direction:t,id:d()}))});var a=this.weight;return n.forEach(function(e){e.id=d(),e.weight=a}),this.candidateMoves=function(){return n},n},t.canAttack=function(e){var t=e.pawn,n=e.x,a=e.y,r=this.pawnAt({x:n,y:a});return!!r&&r.type!==t.type},t.playMove=function(t){if(t){var n=this.moves[t.id];if(n)return n;var a=t.pawn,r=t.x,i=t.y,o=this.pawns.map(function(e){return e===a?e.moveTo({x:r,y:i}):e.x===r&&e.y===i?e.die():e});return n=new e({turn:this.nextTurn(),size:this.size,pawns:o,parent:this,weight:this.weight,move:t}),this.moves[t.id]=n,n}},t.nextTurn=function(){return"black"===this.turn?"white":"black"},t.isGameOver=function(){var e=this,t=!1;return t=(t=(t=t||this.pawns.find(function(t){return"black"===t.type&&"alive"===t.status&&t.y===e.size-1}))||this.pawns.find(function(e){return"white"===e.type&&"alive"===e.status&&0===e.y}))||0===this.candidateMoves().length,this.isGameOver=function(){return t},t},t.guessMove=function(){var e=this.allowedMoves();return e.length?e[f(0,e.length-1)]:null},t.guessOptimalMove=function(){var e=this.allowedMoves();if(!e.length)return null;var t=f(0,e.length*this.weight-1),n=null;return e.forEach(function(e){n||(t>e.weight?t-=e.weight:n=e)}),n},t.learn=function(e,t){e?(this.turn===t?this.promoteMove(e):this.demoteMove(e),this.parent&&this.parent.learn(this.move,t)):this.parent.learn(this.move,this.nextTurn())},t.promoteMove=function(e){for(var t=this.allowedMoves(),n=(t.indexOf(e)+1)%t.length;0===t[n].weight;)n=(n+1)%t.length;e.weight+=1,t[n].weight-=1},t.demoteMove=function(e){if(0!==e.weight){var t=this.allowedMoves(),n=(t.indexOf(e)-1+t.length)%t.length;e.weight-=1,t[n].weight+=1}},e}(),v=function(){function e(e){var t=e.size,n=e.weight;this.current=new m({size:t,weight:n})}return e.prototype.generate=function(){var e=this.current;return e.allowedMoves().map(function(t){return e.move(t)})},e}(),w=(n(192),function(e){var t=e.allowed;return r.a.createElement("table",{className:"allowedMoves"},r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,t.length,": "),t.map(function(e){return r.a.createElement("td",{key:e.id},e.weight.toFixed(2))}))))});function y(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var b=new v({size:3,weight:5});t.default=function(){var e=Object(a.useState)(b.current),t=e[0],n=e[1],o=Object(a.useState)([]),l=o[0],u=o[1],s=Object(a.useState)(!1),d=s[0],p=s[1],f=Object(a.useState)(!0),m=f[0],v=f[1],g=Object(a.useState)(0),k=g[0],x=g[1],E=Object(a.useState)({black:0,white:0}),M=E[0],O=E[1],A=Object(a.useState)(),z=A[0],j=A[1],T=Object(a.useCallback)(function(e){if(!t.isGameOver()){var a=t.playMove(e);n(a),u([t].concat(y(l))),a.isGameOver()&&(x(k+1),O({black:"black"===t.turn?M.black+1:M.black,white:"white"===t.turn?M.white+1:M.white}),j(t.turn),a.learn())}},[t]),C=Object(a.useCallback)(function(){t.isGameOver()?S():T(t[m?"guessOptimalMove":"guessMove"]())},[t]),S=Object(a.useCallback)(function(){n(b.current),u([])});Object(a.useEffect)(function(){d&&C()});var R=Object(a.useCallback)(function(){return p(!d)},[d]);return r.a.createElement(i.a,null,r.a.createElement("div",null,r.a.createElement("button",{type:"button",onClick:S},"Reset"),r.a.createElement("button",{type:"button",onClick:C},"Play"),r.a.createElement("button",{type:"button",onClick:R},"Auto Play"),r.a.createElement("label",null,r.a.createElement("input",{type:"checkbox",onChange:function(e){return v(e.target.checked)},checked:m}),"optimal")," ","objects:",h),r.a.createElement("div",null,"Games played ",k," Black: ",M.black," (",100*(M.black/k).toFixed(2),"%) White: ",M.white," (",100*(M.white/k).toFixed(2),"%)"),r.a.createElement("div",null,"Last winner: ",z),r.a.createElement("br",null),r.a.createElement("div",null,r.a.createElement(c,{board:t,onAllowed:T,size:"default"}),r.a.createElement(w,{allowed:t.allowedMoves()})),r.a.createElement("div",null,!1))}},176:function(e,t,n){var a;e.exports=(a=n(178))&&a.default||a},177:function(e){e.exports={data:{site:{siteMetadata:{title:"Robots vs Humans"}}}}},178:function(e,t,n){"use strict";n.r(t);n(25);var a=n(0),r=n.n(a),i=n(11),o=n.n(i),l=n(89),u=function(e){var t=e.location,n=e.pageResources;return n?r.a.createElement(l.a,Object.assign({location:t,pageResources:n},n.json)):null};u.propTypes={location:o.a.shape({pathname:o.a.string.isRequired}).isRequired},t.default=u},179:function(e,t,n){"use strict";var a=n(177),r=n(0),i=n.n(r),o=n(11),l=n.n(o),u=n(59),s=n.n(u);n(176),i.a.createContext({});l.a.object,l.a.string.isRequired,l.a.func,l.a.func;var c=function(e){var t=e.siteTitle;return i.a.createElement("header",{style:{background:"rebeccapurple",marginBottom:"1.45rem"}},i.a.createElement("div",{style:{margin:"0 auto",maxWidth:960,padding:"1.45rem 1.0875rem"}},i.a.createElement("h1",{style:{margin:0}},i.a.createElement(s.a,{style:{color:"white",textDecoration:"none"},to:"/"},t))))};c.propTypes={siteTitle:l.a.string},c.defaultProps={siteTitle:""};var h=c,d=(n(180),function(e){var t=e.children,n=a.data;return i.a.createElement(i.a.Fragment,null,i.a.createElement(h,{siteTitle:n.site.siteMetadata.title}),i.a.createElement("div",{style:{margin:"0 auto",maxWidth:960,padding:"0px 1.0875rem 1.45rem",paddingTop:0}},i.a.createElement("main",null,t)))});d.propTypes={children:l.a.node.isRequired};t.a=d}}]);
//# sourceMappingURL=component---src-pages-index-js-05206ca86f3591c41e3e.js.map